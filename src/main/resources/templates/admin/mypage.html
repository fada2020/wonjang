<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/layout/layout::layout( ~{::title}, ~{::link}, ~{::body}, ~{::script})}">

<title>마이 페이지</title><body>
<div class="container-fluid">
  <div class="row">
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h2>내 정보</h2>
      </div>

      <div class="profile-card mb-3">
        <img th:unless="${ #strings.isEmpty(member?.picture) }" th:src="${ member?.picture }" alt="사용자 사진" class="profile-image img-fluid" />
      </div>

      <form method="post" th:object="${updateAdminDto}" enctype="multipart/form-data">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <div class="mb-3">
          <label th:for="email" class="form-label">이메일</label>
          <input type="email" th:id="email" th:name="email" th:value="${member?.email}" class="form-control" readonly />
        </div>

        <div class="mb-3">
          <label th:for="name" class="form-label">이름</label>
          <input type="text" th:id="name" th:name="name" th:value="${member?.name}" class="form-control" required />
        </div>


        <div class="mb-3">
          <label th:for="password" class="form-label">비밀번호</label>
          <input type="password" th:field="*{password}" class="form-control" placeholder="비밀번호 변경 (선택)" />
        </div>

        <div class="mb-3">
          <label th:for="pictureFile" class="form-label">사진 변경</label>
          <input type="file" th:field="*{pictureFile}" class="form-control" />
        </div>

        <div class="mb-3">
          <button type="submit" class="btn btn-primary">수정 완료</button>
        </div>
      </form>
    </main>
  </div>
</div>
</body>

</body>
<script>
  function checkValues(form){
    const email = form.email.value.trim();
    const password = form.password.value.trim();
    // 이메일 유효성 검사
    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    if (!emailRegex.test(email)) {
      alert("올바른 이메일 주소를 입력하세요.");
      form.email.focus();
      return false;  // 폼 제출을 막습니다
    }

    // 비밀번호가 비어 있는지 확인
    if (password === "") {
      alert("비밀번호를 입력하세요.");
      form.password.focus();
      return false;  // 폼 제출을 막습니다
    }

    return true;  // 유효성 검사를 통과하면 폼을 제출합니다
  }


</script>
</html>